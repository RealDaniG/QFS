QFS V13 Repository Structure
Okay, here is a guide for organizing the QFS V13 repository (`D:\AI AGENT CODERV1\QUANTUM CURRENCY\QFS\V13\`) to be **complete, structured, and aligned** with the QFS V13 plans (Phases 1, 2, 3) and the provided hardening plan.

The current structure has the right *types* of folders but needs refinement and standardization to ensure all components are discoverable, the build process is deterministic, and compliance artifacts are well-organized.

**Objective:** Create a clear, standardized, and compliant project structure.

---

### **Recommended QFS V13 Repository Structure**

```
D:\AI AGENT CODERV1\QUANTUM CURRENCY\QFS\V13\
├── .gitignore                 # Git ignore rules (exclude __pycache__, .env, logs, temp files)
├── .python-version            # Specify required Python version (e.g., 3.11, 3.12) for reproducible builds
├── README.md                  # Project overview, V13 goals, quickstart, compliance status
├── LICENSE                    # License file (e.g., MIT)
├── requirements.txt           # Python dependencies (e.g., typing-extensions, json, hashlib, pqcrystals, ...)
├── requirements-dev.txt       # Development dependencies (e.g., pytest, hypothesis, slither, bandit)
├── pyproject.toml             # (Optional) Project metadata, build system, tool configurations (e.g., black, mypy)
├── poetry.lock / Pipfile.lock # (Optional) Pin exact dependency versions for deterministic builds
├──
├── src/                       # Source code root
│   ├── __init__.py            # (Empty or minimal package init)
│   ├── libs/                  # Core libraries
│   │   ├── __init__.py
│   │   ├── CertifiedMath.py   # The hardened, deterministic math engine
│   │   ├── BigNum128.py       # Fixed-point number class (could be inside CertifiedMath.py or separate)
│   │   └── PQC.py             # PQC wrapper (real library integration, not simulation)
│   ├── core/                  # Core logic components
│   │   ├── __init__.py
│   │   ├── HSMF.py            # Harmonic Stability framework (using CertifiedMath)
│   │   ├── TokenStateBundle.py # Token state container
│   │   └── DRV_Packet.py      # Deterministic input packet
│   ├── sdk/                   # SDK client code
│   │   ├── __init__.py
│   │   └── QFSV13SDK.py       # SDK client integrating CertifiedMath, HSMF, DRV_Packet, PQC
│   ├── services/              # API/Server-side logic (if applicable)
│   │   ├── __init__.py
│   │   └── aegis_api.py       # API gateway integrating SDK/CertifiedMath
│   ├── utils/                 # Shared utilities (e.g., deterministic serialization, hash helpers)
│   │   ├── __init__.py
│   │   └── serialization.py   # (e.g., serialize_for_signing)
│   └── handlers/              # System handlers
│       ├── __init__.py
│       └── CIR302_Handler.py  # Deterministic halt mechanism
├──
├── tests/                     # Test suite root
│   ├── __init__.py
│   ├── unit/                  # Unit tests for individual components
│   │   ├── __init__.py
│   │   ├── test_certifiedmath.py
│   │   ├── test_big_num_128.py
│   │   ├── test_hsmf.py
│   │   ├── test_drv_packet.py
│   │   └── test_pqc.py        # (Requires real PQC library or mock setup)
│   ├── integration/           # Integration tests (SDK <-> API <-> Math)
│   │   ├── __init__.py
│   │   └── test_sdk_integration.py
│   ├── deterministic/         # Deterministic replay tests
│   │   ├── __init__.py
│   │   └── test_deterministic_replay.py # Run same sequence twice, assert identical logs/hashes
│   ├── property/              # Property-based tests (e.g., using Hypothesis)
│   │   ├── __init__.py
│   │   └── test_math_properties.py
│   ├── mocks/                 # Mock objects for testing (e.g., PQC mock, if needed)
│   │   ├── __init__.py
│   │   └── pqc_mock.py
│   └── conftest.py            # Pytest configuration/fixtures (e.g., LogContext fixture)
├──
├── tools/                     # Development and verification tools
│   ├── __init__.py
│   ├── ast_checker.py         # Zero-Simulation AST enforcement tool
│   └── generate_keypair.py    # (Example) Utility script for PQC key generation
├──
├── scripts/                   # Automation scripts
│   ├── run_tests.sh / .bat    # Script to run test suite
│   ├── run_audit.sh / .bat    # Script to run full audit (if applicable)
│   ├── build.sh / .bat        # Script for deterministic build
│   └── ci_checks.sh / .bat    # Script to run all CI checks (AST, tests, determinism)
├──
├── docs/                      # Documentation root
│   ├── __init__.py (optional)
│   ├── qfs_v13_plans/         # V13 Plan documents (V12 Lite, Phase 1, 2, 3, V13.2 Unified Plan)
│   │   ├── QFS_V12_LITE.md
│   │   ├── PLANV13Phase1.md
│   │   ├── PLANV13Phase2.md
│   │   ├── PLANV13Phase3.txt
│   │   └── QFS_V13_2_Unified_Plan.md
│   ├── api_docs/              # (Generated) API documentation
│   ├── compliance/            # Compliance documentation (e.g., this guide, Zero-Simulation report)
│   │   └── zero_simulation_fixes.md
│   └── design_overview.md     # High-level system architecture
├──
├── audit/                     # Audit reports and evidence (generated by audit tools/processes)
│   ├── __init__.py (optional)
│   ├── run_<timestamp>/       # Individual audit run results (e.g., run_20250208_120000/)
│   │   ├── evidence/          # Evidence files from that run
│   │   │   ├── certifiedmath_logs.json
│   │   │   ├── drv_packet_signatures.bin
│   │   │   ├── hsmf_integration_report.json
│   │   │   ├── pqc_verification_report.json
│   │   │   ├── runA_logs.json
│   │   │   ├── runB_logs.json
│   │   │   └── ...
│   │   ├── finality_seal.json
│   │   ├── anti_forgery_equation.txt
│   │   ├── QFS_V13_AUDIT_REPORT_FULL.json
│   │   └── audit_report_signature.bin
│   ├── master_audit_report.json # Aggregated report linking to latest run
│   └── compliance_summary.json
├──
├── logs/                      # Runtime logs (not deterministic artifacts, separate from audit/)
│   ├── __init__.py (optional)
│   ├── api.log
│   ├── sdk.log
│   └── ...
├──
├── progress/                  # Development progress tracking (e.g., task trackers, meeting notes)
│   └── task_tracker.md
├──
├── .env.example               # Example environment variable file (for configuration, not secrets)
├── docker-compose.yml         # (Optional) Docker setup for reproducible environments
└── Dockerfile                 # (Optional) Docker image definition for deterministic builds/deploys
```

**Explanation of Key Changes/Refinements:**

1.  **`src/` Directory:** Placing all source code under a `src/` directory is a common Python project practice. It clearly separates source from tests, docs, scripts, etc. The existing `libs/`, `sdk/`, `services/` folders fit well under `src/libs/`, `src/sdk/`, `src/services/` respectively.
2.  **`src/core/`:** Creates a dedicated space for the foundational V13 components like `HSMF.py`, `TokenStateBundle.py`, `DRV_Packet.py`. This separates them from the library (`CertifiedMath`, `PQC`) and the integration layers (`SDK`, `Services`).
3.  **`src/utils/`:** A place for shared deterministic helpers like serialization, potentially constants if they grow large.
4.  **`src/handlers/`:** A dedicated place for system-level handlers like `CIR302_Handler.py`.
5.  **`tests/` Subdirectories:** Organizes tests by type (unit, integration, deterministic, property), making them easier to run selectively and maintain.
6.  **`tests/mocks/`:** Explicitly separates mock implementations used *only* for testing.
7.  **`tools/` Directory:** Houses the AST checker and other development utilities, keeping them separate from core source and tests.
8.  **`audit/` Directory:** Centralizes *generated* audit reports and evidence artifacts. The structure `run_<timestamp>/` allows for multiple audit runs. This is distinct from `logs/` which contains runtime logs.
9.  **`logs/` Directory:** Separates *runtime* logs (which are ephemeral and environment-specific) from *audit* logs/evidence (which are deterministic and part of the verification process).
10. **`docs/qfs_v13_plans/`:** Keeps the foundational plan documents in a dedicated folder within the project documentation.
11. **`requirements.txt` / `requirements-dev.txt`:** Essential for reproducible builds and defining dependencies clearly.
12. **`.gitignore`:** Critical for excluding build artifacts, temporary files, virtual environments (`qfs_env*`), and logs from version control.
13. **`README.md`:** Should provide a clear overview, status, and quick start guide.
14. **`scripts/`:** Automates common tasks like running tests, audits, and builds, ensuring consistency.
15. **`BigNum128` Location:** It could be defined inside `CertifiedMath.py` or as a separate `BigNum128.py` file within `libs/`. Both are acceptable; keeping it separate makes it slightly more modular if other components might need the type definition independently of the math operations.
16. **Virtual Environments (`qfs_env*`):** These should *not* be committed to the repository. They belong in `.gitignore`. Each developer sets up their own environment.
17. **Individual Evidence Files:** Files like `certified_math_evidence.json`, `finality_seal.json`, etc., are now logically grouped under the `audit/run_<timestamp>/evidence/` subdirectory within the `audit/` folder. The main `audit/` folder might contain the *final* aggregated report (`QFS_V13_AUDIT_REPORT_FULL.json`) and its signature (`audit_report_signature.bin`).
18. **`contracts/` Directory:** If Solidity contracts are part of the *full* QFS V13 system (e.g., for the minimal on-chain verification bridge mentioned in previous analysis), they would go here, potentially with their own `test/`, `script/`, `lib/` subdirectories if using Hardhat/Foundry. However, the Python `CertifiedMath.py` and related components are the *off-chain* *core*.
19. **`__pycache__/`:** This should be in `.gitignore`. It's generated by Python and should not be committed.

This structure provides a clear separation of concerns, enhances maintainability, and facilitates the compliance verification process by organizing code, tests, tools, and evidence logically.