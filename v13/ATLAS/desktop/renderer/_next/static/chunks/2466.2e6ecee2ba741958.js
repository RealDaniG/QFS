"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2466],{42466:function(e,a,s){s.r(a),s.d(a,{ExplainRewardFlow:function(){return w}});var l=s(57437),t=s(2265),n=s(79820),r=s(12381),i=s(40279),c=s(75060),d=s(98497),o=s(11713),u=s(83464),x=s(32038),h=s(88906),p=s(51817),m=s(49322),j=s(41439);function w(){let{isConnected:e}=(0,x.i)(),[a,s]=(0,t.useState)(""),[w,b]=(0,t.useState)(void 0),[v,f]=(0,t.useState)(!1),{data:g,isLoading:N,error:_,refetch:y}=function(e,a){let{isConnected:s,address:l}=(0,x.i)();return(0,o.a)({queryKey:["explainReward",e,a],queryFn:async()=>{let{data:s}=await u.Z.get("/api/explain/reward/".concat(e).concat(a?"?epoch=".concat(a):""),{headers:{"x-atlas-address":l}});return s},enabled:!!e&&s&&!!l,staleTime:6e4})}(a,w);return e?(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(n.Zb,{children:[(0,l.jsx)(n.Ol,{children:(0,l.jsx)(n.ll,{className:"text-lg",children:"Explain Reward (End-to-End Demo)"})}),(0,l.jsxs)(n.aY,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(c._,{htmlFor:"walletId",children:"Wallet ID"}),(0,l.jsx)(i.I,{id:"walletId",value:a,onChange:e=>s(e.target.value),placeholder:"e.g., wallet_123"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(c._,{htmlFor:"epoch",children:"Epoch (optional)"}),(0,l.jsx)(i.I,{id:"epoch",type:"number",value:null!=w?w:"",onChange:e=>b(e.target.value?Number(e.target.value):void 0),placeholder:"e.g., 1"})]})]}),(0,l.jsxs)(r.z,{onClick:()=>{a.trim()&&(f(!0),y())},disabled:!a.trim()||N,children:[N&&(0,l.jsx)(p.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Explain Reward"]})]})]}),_&&(0,l.jsx)(n.Zb,{className:"border-destructive",children:(0,l.jsx)(n.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex items-center space-x-2 text-destructive",children:[(0,l.jsx)(m.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"text-sm",children:"Failed to load explanation. Please try again."})]})})}),v&&g&&(0,l.jsx)(d.E,{type:"reward",explanation:{wallet_id:g.wallet_id,user_id:g.wallet_id,reward_event_id:"demo",epoch:g.epoch,timestamp:Date.now(),base_reward:{ATR:g.base},bonuses:g.bonuses,caps:g.caps,guards:g.guards,policy_version:"v18",policy_hash:"demo",total_reward:{ATR:g.total},explanation_hash:g.metadata.replay_hash,reason_codes:[]},onClose:()=>f(!1)})]}):(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)(n.Zb,{className:"border-blue-500/30 bg-blue-500/5",children:[(0,l.jsxs)(n.Ol,{children:[(0,l.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5 text-blue-600"}),"Reward Explanation Requires Authentication"]}),(0,l.jsx)(n.SZ,{children:"Connect your wallet to inspect reward explanations and verify economic calculations."})]}),(0,l.jsxs)(n.aY,{className:"space-y-4",children:[(0,l.jsx)("div",{className:"p-4 bg-background/50 rounded-xl border border-blue-500/20",children:(0,l.jsx)("p",{className:"text-sm text-muted-foreground",children:"The Explain Reward feature provides deterministic, auditable explanations for all reward calculations in the QFS system. Authentication is required to access this feature."})}),(0,l.jsx)("div",{className:"flex justify-center pt-4",children:(0,l.jsx)(j.w,{})})]})]})})}},41439:function(e,a,s){s.d(a,{w:function(){return n}});var l=s(57437),t=s(67872);function n(){return(0,l.jsx)("div",{className:"flex flex-col items-end gap-2",children:(0,l.jsx)(t.NL,{label:"Connect Wallet",accountStatus:"address",chainStatus:"icon",showBalance:!1})})}},75060:function(e,a,s){s.d(a,{_:function(){return r}});var l=s(57437);s(2265);var t=s(370),n=s(93448);function r(e){let{className:a,...s}=e;return(0,l.jsx)(t.f,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...s})}}}]);