"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2040],{42040:function(e,s,t){t.r(s),t.d(s,{default:function(){return A}});var a=t(57437),n=t(2265),r=t(12381),i=t(40279),l=t(69174),c=t(79820),d=t(17168),o=t(96246),x=t(86899),m=t(90641),u=t(91723),h=t(85010);function f(){let{events:e,isLoading:s,error:t}=function(){let[e,s]=(0,n.useState)([]),[t,a]=(0,n.useState)(!0),[r,i]=(0,n.useState)(null),l=(0,n.useCallback)(async()=>{a(!0);try{let e=await (0,x.X)(),t=(await e.getAll()).sort((e,s)=>s.timestamp-e.timestamp);s(t),i(null)}catch(e){console.error("Failed to fetch feed:",e),i(e)}finally{a(!1)}},[]);return(0,n.useEffect)(()=>{l();let e=setInterval(l,3e3);return()=>clearInterval(e)},[l]),{events:e,isLoading:t,error:r,refresh:l}}();return s&&0===e.length?(0,a.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"Loading feed..."}):t?(0,a.jsxs)("div",{className:"p-4 text-center text-red-500",children:["Error loading feed: ",t.message]}):(0,a.jsxs)(c.Zb,{className:"w-full h-full border-none shadow-none",children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Activity Feed"}),(0,a.jsx)(c.SZ,{children:"Real-time events pending ledger confirmation"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)(m.x,{className:"h-[600px] pr-4",children:(0,a.jsx)("div",{className:"space-y-4",children:0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No activity yet. Create some content!"}):e.map(e=>{var s;return(0,a.jsx)(c.Zb,{className:"overflow-hidden",children:(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(l.C,{variant:"outline",className:"font-mono text-xs",children:e.eventType}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(u.Z,{className:"w-3 h-3 mr-1"}),(0,h.Q)(e.timestamp,{addSuffix:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Event ID: ",(0,a.jsxs)("span",{className:"font-mono text-xs text-muted-foreground",children:[e.id.slice(0,8),"..."]})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground break-all",children:["ContentCreated"===e.eventType&&(0,a.jsxs)("span",{children:["Created content CID: ",(0,a.jsxs)("span",{className:"font-mono text-xs bg-muted px-1 rounded",children:[null===(s=e.eventData.contentCID)||void 0===s?void 0:s.slice(0,16),"..."]})]}),"ProfileUpdated"===e.eventType&&(0,a.jsx)("span",{children:"Updated profile"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center text-xs",children:["Status:",(0,a.jsx)(l.C,{variant:"confirmed"===e.status?"default":"secondary",className:"ml-2 capitalize",children:e.status})]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:[e.did.slice(0,12),"..."]})]})]})},e.id)})})})})]})}var p=t(71837),j=t(32038);let g=[{nodeDID:"did:key:qfs_primary_01"},{nodeDID:"did:key:qfs_primary_02"},{nodeDID:"did:key:qfs_replica_01"}];var v=t(15291),N=t(66337),y=t(88906),w=t(96137),b=t(92934);function S(){let{isConnected:e}=(0,j.i)(),{feed:s,loading:t,nodes:r,selectedNode:i,selectNode:d}=function(){let{isConnected:e,address:s}=(0,j.i)(),[t,a]=(0,n.useState)([]),[r,i]=(0,n.useState)(!0),[l,c]=(0,n.useState)(g[0]);(0,n.useEffect)(()=>{if(!e||!s){i(!1),a([]);return}d()},[l,e,s]);let d=async()=>{if(!e||!s){i(!1);return}i(!0);try{let e=await (0,p._)("/api/v18/content/feed?limit=20");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status," "));let s=(await e.json()).map(e=>({id:e.id,cid:e.content_hash,authorDID:e.sender,content:{text:e.content},coherenceScore:1,proof:"ledger_".concat(e.content_hash.slice(0,8)," "),timestamp:1e3*e.timestamp}));a(s)}catch(e){console.error("Failed to fetch QFS feed:",e)}finally{i(!1)}};return{feed:t,loading:r,refresh:d,nodes:g,selectedNode:l,selectNode:c}}();return e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(c.Zb,{className:"bg-muted/30",children:(0,a.jsxs)(c.Ol,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.Z,{className:"h-5 w-5 text-primary"}),(0,a.jsx)(c.ll,{className:"text-lg",children:"QFS Node Network"})]}),(0,a.jsxs)(v.Ph,{value:i.nodeDID,onValueChange:e=>{let s=r.find(s=>s.nodeDID===e);s&&d(s)},children:[(0,a.jsx)(v.i4,{className:"w-[280px]",children:(0,a.jsx)(v.ki,{placeholder:"Select a trusted node"})}),(0,a.jsx)(v.Bw,{children:r.map(e=>(0,a.jsx)(v.Ql,{value:e.nodeDID,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"h-3 w-3 text-green-500"}),(0,a.jsxs)("span",{className:"font-mono",children:[e.nodeDID.slice(0,16),"..."]})]})},e.nodeDID))})]})]}),(0,a.jsxs)(c.SZ,{children:["You are viewing the content reality computed by ",(0,a.jsxs)("strong",{children:[i.nodeDID.slice(0,12),"..."]}),". Verifiable by Merkle Proofs."]})]})}),(0,a.jsx)("div",{className:"space-y-4",children:t?(0,a.jsx)("div",{className:"text-center py-10",children:"Connecting to distributed node..."}):s.map(e=>(0,a.jsx)(c.Zb,{children:(0,a.jsxs)(c.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(o.qE,{children:(0,a.jsx)(o.Q5,{children:e.authorDID.slice(8,10).toUpperCase()})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.authorDID}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.timestamp).toLocaleTimeString()})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,a.jsxs)(l.C,{variant:"outline",className:"text-green-600 border-green-200 bg-green-50",children:["Coherence: ",e.coherenceScore.toFixed(3)]}),(0,a.jsxs)("div",{className:"text-[10px] text-muted-foreground flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"h-3 w-3"}),"Verified Proof"]})]})]}),(0,a.jsx)("p",{className:"text-base mb-4",children:e.content.text}),(0,a.jsxs)("div",{className:"p-2 bg-muted/50 rounded text-xs font-mono text-muted-foreground break-all",children:["Proof Root: ",e.proof]})]})},e.id))})]}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(c.Zb,{className:"border-blue-500/30 bg-blue-500/5",children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5 text-blue-600"}),"Public Feed Mode"]}),(0,a.jsx)(c.SZ,{children:"Connect your wallet to see your personalized distributed feed from trusted QFS nodes."})]}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-4 bg-background/50 rounded-xl border border-blue-500/20",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"The distributed feed shows content verified across multiple QFS nodes. Authentication is required to participate and view node-specific content."})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4 text-green-500"}),(0,a.jsx)("span",{children:"All content is cryptographically verified"})]})]})})]})})}var k=t(11713),C=t(55736),Z=t(41217),_=t(95805),z=t(29202),D=t(70525),E=t(11239),F=t(42208),I=t(53417),T=t(42488),L=t(98497),q=t(66505),P=t(74291);function A(){let[e,s]=(0,n.useState)(""),[t,x]=(0,n.useState)("spaces"),{explanation:m,fetchRankingExplanation:u,isLoading:h,clearExplanation:j}=(0,q.U)(),{data:g,isLoading:v}=(0,k.a)({queryKey:["spaces"],queryFn:async()=>{let e=await (0,p._)("/api/v18/spaces");if(!e.ok)throw Error("Failed to fetch spaces");return e.json()}}),{data:N,isLoading:w}=(0,k.a)({queryKey:["trending"],queryFn:async()=>{let e=await (0,p._)("/api/v18/trending");if(!e.ok)throw Error("Failed to fetch trending topics");return e.json()}}),{data:b,isLoading:A}=(0,k.a)({queryKey:["recommendations"],queryFn:async()=>{let e=await (0,p._)("/api/v18/recommendations");if(!e.ok)throw Error("Failed to fetch recommendations");return e.json()}}),{data:Y,isLoading:O}=(0,k.a)({queryKey:["activity"],queryFn:async()=>{let e=await (0,p._)("/api/v18/activity");if(!e.ok)throw Error("Failed to fetch activity");return e.json()}}),Q=(g||[]).filter(s=>s.name.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase())||s.tags.some(s=>s.toLowerCase().includes(e.toLowerCase()))),U=async e=>{try{if(!(await (0,p._)("/api/v18/spaces/".concat(e,"/join"),{method:"POST"})).ok)throw Error("Failed to join space");alert("Successfully joined space ".concat(e,"!"))}catch(e){console.error("Error joining space:",e),alert("Failed to join space.")}};return(0,a.jsx)("div",{className:"max-w-6xl mx-auto space-y-6",children:(0,a.jsxs)(d.mQ,{value:t,onValueChange:x,className:"w-full",children:[(0,a.jsxs)(d.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(d.SP,{value:"spaces",children:"Spaces"}),(0,a.jsx)(d.SP,{value:"trending",children:"Trending Topics"}),(0,a.jsx)(d.SP,{value:"network",children:"Network & Trust"}),(0,a.jsx)(d.SP,{value:"discover",children:"Discover"}),(0,a.jsx)(d.SP,{value:"activity",children:"Raw Ledger"})]}),(0,a.jsxs)(d.nU,{value:"spaces",className:"space-y-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(c.ll,{children:"Spaces"}),(0,a.jsx)(c.SZ,{children:"Join spaces that align with your interests and values"})]}),(0,a.jsxs)(r.z,{children:[(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-2"}),"Create Space"]})]})}),(0,a.jsx)(c.aY,{children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(Z.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(i.I,{placeholder:"Search spaces by name, description, or tags...",className:"pl-10",value:e,onChange:e=>s(e.target.value)})]})})]}),v?(0,a.jsx)("div",{className:"flex justify-center p-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Q.map(e=>(0,a.jsxs)(c.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,a.jsx)(c.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(o.qE,{className:"h-12 w-12",children:[(0,a.jsx)(o.F$,{src:e.avatar}),(0,a.jsx)(o.Q5,{children:e.name.split(" ").map(e=>e[0]).join("")})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),e.isVerified&&(0,a.jsx)(y.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,a.jsx)(_.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[(e.members||0).toLocaleString()," members"]}),e.isPublic?(0,a.jsx)(z.Z,{className:"h-3 w-3"}):(0,a.jsx)(y.Z,{className:"h-3 w-3"})]})]})]}),(0,a.jsxs)(l.C,{variant:"outline",className:"text-green-600",children:["+",e.growthRate||0,"%"]})]})}),(0,a.jsxs)(c.aY,{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mb-4",children:(e.tags||[]).map(e=>(0,a.jsxs)(l.C,{variant:"secondary",className:"text-xs",children:["#",e]},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(D.Z,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Coherence"})]}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:(e.coherence_rank||e.coherenceScore||0).toFixed(2)})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mb-1",children:[(0,a.jsx)(E.Z,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Reward Pool"})]}),(0,a.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[(e.rewardPool||0).toFixed(0)," FLX"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.z,{className:"flex-1",onClick:()=>U(e.id),children:"Join Space"}),(0,a.jsx)(r.z,{variant:"outline",size:"sm",children:(0,a.jsx)(F.Z,{className:"h-4 w-4"})})]})]})]},e.id))})]}),(0,a.jsx)(d.nU,{value:"trending",className:"space-y-6",children:(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Trending Topics"}),(0,a.jsx)(c.SZ,{children:"Discover what's trending across the ATLAS network with full transparency"})]}),(0,a.jsx)(c.aY,{children:w?(0,a.jsx)("div",{className:"flex justify-center p-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"space-y-4",children:(N||[]).map((e,s)=>(0,a.jsxs)(P.Vq,{onOpenChange:s=>{s?u(e.id):j()},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-muted-foreground w-8",children:["#",s+1]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:e.name}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(I.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.posts.toLocaleString()," posts"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(T.Z,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.engagement.toLocaleString()," engagements"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(D.Z,{className:"h-3 w-3 text-green-600"}),(0,a.jsxs)("span",{className:"text-green-600",children:["+",e.growth,"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Coherence"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:e.coherenceScore.toFixed(2)})]}),(0,a.jsx)(P.hg,{asChild:!0,children:(0,a.jsxs)(r.z,{variant:"outline",size:"sm",className:"gap-2",children:[(0,a.jsx)(Z.Z,{className:"h-3 w-3"}),"Why?"]})}),(0,a.jsx)(r.z,{variant:"outline",children:"Explore"})]})]}),(0,a.jsx)(P.cZ,{className:"max-w-2xl",children:(0,a.jsx)(L.E,{type:"ranking",explanation:m||void 0,isLoading:h})})]},e.id))})})]})}),(0,a.jsx)(d.nU,{value:"network",className:"space-y-6",children:(0,a.jsx)(S,{})}),(0,a.jsx)(d.nU,{value:"discover",className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Recommended for You"}),(0,a.jsx)(c.SZ,{children:"Spaces and topics based on your activity and interests"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(b||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsx)(l.C,{variant:"outline",className:"text-xs",children:e.type})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.reason})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-green-600",children:[e.match,"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"match"})]})]},s))})})]}),(0,a.jsxs)(c.Zb,{children:[(0,a.jsxs)(c.Ol,{children:[(0,a.jsx)(c.ll,{children:"Network Activity"}),(0,a.jsx)(c.SZ,{children:"Real-time activity across the ATLAS network"})]}),(0,a.jsx)(c.aY,{children:(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"space-y-4",children:(Y||[]).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm",children:e.action}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:e.user}),(0,a.jsx)("span",{children:"â€¢"}),(0,a.jsx)("span",{children:e.time})]})]})]},s))})})})]})]})}),(0,a.jsx)(d.nU,{value:"activity",className:"space-y-6",children:(0,a.jsx)(f,{})})]})})}},96246:function(e,s,t){t.d(s,{F$:function(){return l},Q5:function(){return c},qE:function(){return i}});var a=t(57437);t(2265);var n=t(27954),r=t(93448);function i(e){let{className:s,...t}=e;return(0,a.jsx)(n.fC,{"data-slot":"avatar",className:(0,r.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",s),...t})}function l(e){let{className:s,...t}=e;return(0,a.jsx)(n.Ee,{"data-slot":"avatar-image",className:(0,r.cn)("aspect-square size-full",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)(n.NY,{"data-slot":"avatar-fallback",className:(0,r.cn)("bg-muted flex size-full items-center justify-center rounded-full",s),...t})}},74291:function(e,s,t){t.d(s,{Vq:function(){return l},cZ:function(){return x},hg:function(){return c}});var a=t(57437);t(2265);var n=t(70001),r=t(32489),i=t(93448);function l(e){let{...s}=e;return(0,a.jsx)(n.fC,{"data-slot":"dialog",...s})}function c(e){let{...s}=e;return(0,a.jsx)(n.xz,{"data-slot":"dialog-trigger",...s})}function d(e){let{...s}=e;return(0,a.jsx)(n.h_,{"data-slot":"dialog-portal",...s})}function o(e){let{className:s,...t}=e;return(0,a.jsx)(n.aV,{"data-slot":"dialog-overlay",className:(0,i.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function x(e){let{className:s,children:t,showCloseButton:l=!0,...c}=e;return(0,a.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,a.jsx)(o,{}),(0,a.jsxs)(n.VY,{"data-slot":"dialog-content",className:(0,i.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...c,children:[t,l&&(0,a.jsxs)(n.x8,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}},15291:function(e,s,t){t.d(s,{Bw:function(){return m},Ph:function(){return d},Ql:function(){return u},i4:function(){return x},ki:function(){return o}});var a=t(57437);t(2265);var n=t(74797),r=t(40875),i=t(30401),l=t(22135),c=t(93448);function d(e){let{...s}=e;return(0,a.jsx)(n.fC,{"data-slot":"select",...s})}function o(e){let{...s}=e;return(0,a.jsx)(n.B4,{"data-slot":"select-value",...s})}function x(e){let{className:s,size:t="default",children:i,...l}=e;return(0,a.jsxs)(n.xz,{"data-slot":"select-trigger","data-size":t,className:(0,c.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...l,children:[i,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(r.Z,{className:"size-4 opacity-50"})})]})}function m(e){let{className:s,children:t,position:r="popper",...i}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsxs)(n.VY,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...i,children:[(0,a.jsx)(h,{}),(0,a.jsx)(n.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(f,{})]})})}function u(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(n.ck,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(i.Z,{className:"size-4"})})}),(0,a.jsx)(n.eT,{children:t})]})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(n.u_,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(l.Z,{className:"size-4"})})}function f(e){let{className:s,...t}=e;return(0,a.jsx)(n.$G,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(r.Z,{className:"size-4"})})}},66505:function(e,s,t){t.d(s,{U:function(){return r}});var a=t(2265);let n="http://localhost:8000";function r(){let[e,s]=(0,a.useState)(!1),[t,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(null);return{isLoading:e,error:t,explanation:i,fetchRewardExplanation:async(e,t)=>{s(!0),r(null);try{let s="".concat(n,"/explain/reward/").concat(e).concat(t?"?epoch=".concat(t):""),a=await fetch(s,{headers:{Authorization:"Bearer ".concat(getAuthToken()),"Content-Type":"application/json"}});if(!a.ok){if(401===a.status)throw Error("Authentication required");if(403===a.status)throw Error("Permission denied");throw Error("Failed to fetch explanation")}let r=await a.json();l(r)}catch(e){console.error(e),r(e instanceof Error?e.message:"Could not load explanation."),l(null)}finally{s(!1)}},fetchRankingExplanation:async e=>{s(!0),r(null);try{let s="".concat(n,"/explain/ranking/").concat(e),t=await fetch(s,{headers:{Authorization:"Bearer ".concat(getAuthToken()),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch explanation");let a=await t.json();l(a)}catch(e){console.error(e),r("Could not load explanation.")}finally{s(!1)}},clearExplanation:()=>{l(null),r(null)}}}},71837:function(e,s,t){t.d(s,{_:function(){return n}});let a="atlas_session_v1";async function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{auth:t=!0,headers:n={},...r}=s,i=new Headers(n);if(s.body&&!i.has("Content-Type")&&i.set("Content-Type","application/json"),t){let e=localStorage.getItem(a);if(e)try{let s=JSON.parse(e);s.session_token&&i.set("Authorization","Bearer ".concat(s.session_token))}catch(e){console.error("Failed to parse session for auth header",e)}}let l=e.startsWith("http")?e:"".concat("http://localhost:8000").concat(e),c=await fetch(l,{...r,headers:i});return 401===c.status&&t&&(localStorage.removeItem(a),window.dispatchEvent(new Event("atlas-auth-expired"))),c}},86899:function(e,s,t){t.d(s,{X:function(){return n}});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}init(){}add(e){this.events.set(e.id,e)}get(e){return this.events.get(e)}getAll(){return Array.from(this.events.values())}remove(e){this.events.delete(e)}clear(){this.events.clear()}constructor(){this.events=new Map}}function n(){return a.getInstance()}}}]);