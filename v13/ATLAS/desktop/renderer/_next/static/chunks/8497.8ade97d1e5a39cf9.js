"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8497],{98497:function(e,s,t){t.d(s,{E:function(){return j}});var n=t(57437),l=t(79820),a=t(69174),i=t(12381);t(2265);var r=t(90759),d=t(93448);function o(e){let{className:s,orientation:t="horizontal",decorative:l=!0,...a}=e;return(0,n.jsx)(r.f,{"data-slot":"separator",decorative:l,orientation:t,className:(0,d.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",s),...a})}var c=t(91668);function x(e){let{delayDuration:s=0,...t}=e;return(0,n.jsx)(c.zt,{"data-slot":"tooltip-provider",delayDuration:s,...t})}function m(e){let{...s}=e;return(0,n.jsx)(x,{children:(0,n.jsx)(c.fC,{"data-slot":"tooltip",...s})})}function h(e){let{...s}=e;return(0,n.jsx)(c.xz,{"data-slot":"tooltip-trigger",...s})}function u(e){let{className:s,sideOffset:t=0,children:l,...a}=e;return(0,n.jsx)(c.h_,{children:(0,n.jsxs)(c.VY,{"data-slot":"tooltip-content",sideOffset:t,className:(0,d.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",s),...a,children:[l,(0,n.jsx)(c.Eh,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function j(e){var s,t,r,d,c,j,p,f;let{type:v,explanation:g,onClose:b,isLoading:N}=e;if(N)return(0,n.jsxs)(l.Zb,{className:"w-full max-w-2xl animate-pulse",children:[(0,n.jsx)(l.Ol,{children:(0,n.jsx)("div",{className:"h-6 bg-muted rounded w-1/3"})}),(0,n.jsx)(l.aY,{children:(0,n.jsx)("div",{className:"h-24 bg-muted rounded"})})]});if(!g)return null;let w="reward"===v,y="ranking"===v,k=w?g:null,z=y?g:null,C=(null==k?void 0:null===(t=k.breakdown)||void 0===t?void 0:null===(s=t.base_reward)||void 0===s?void 0:s.ATR)||(null==k?void 0:null===(r=k.base_reward)||void 0===r?void 0:r.ATR),_=(null==k?void 0:null===(d=k.breakdown)||void 0===d?void 0:d.bonuses)||(null==k?void 0:k.bonuses),R=(null==k?void 0:null===(c=k.breakdown)||void 0===c?void 0:c.caps)||(null==k?void 0:k.caps),E=(null==k?void 0:null===(j=k.breakdown)||void 0===j?void 0:j.guards)||(null==k?void 0:k.guards),A=null==z?void 0:z.signals,F=null==z?void 0:z.neighbors,S=(null===(p=g.verification)||void 0===p?void 0:p.hash)||g.explanation_hash||"unknown";return(0,n.jsx)(x,{children:(0,n.jsxs)(l.Zb,{className:"w-full max-w-2xl shadow-lg border-2 border-primary/10",children:[(0,n.jsxs)(l.Ol,{className:"flex flex-row items-center justify-between bg-muted/20 pb-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)(l.ll,{className:"text-lg font-semibold flex items-center gap-2",children:["Explain This: ",w?"Reward":"Ranking"]}),(0,n.jsxs)(a.C,{variant:"outline",className:"font-mono text-xs",children:["Hash: ",S.slice(0,8),"..."]})]}),b&&(0,n.jsx)(i.z,{variant:"ghost",size:"sm",onClick:b,className:"hover:bg-destructive/10 hover:text-destructive",children:"âœ•"})]}),(0,n.jsxs)(l.aY,{className:"space-y-6 pt-6",children:[w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-muted/30 p-3 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-sm text-muted-foreground mb-1",children:"Base Reward"}),(0,n.jsx)("div",{className:"text-2xl font-bold font-mono text-primary",children:C})]}),_&&_.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:["Bonuses ",(0,n.jsx)(a.C,{variant:"secondary",className:"text-[10px]",children:_.length})]}),(0,n.jsx)("ul",{className:"space-y-2",children:_.map((e,s)=>(0,n.jsxs)("li",{className:"flex justify-between items-center text-sm p-2 rounded hover:bg-muted/50 transition-colors",children:[(0,n.jsx)("span",{className:"font-medium",children:e.label}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-mono text-green-600 font-bold",children:e.value}),(0,n.jsxs)(m,{children:[(0,n.jsx)(h,{children:(0,n.jsx)("span",{className:"text-muted-foreground cursor-help text-xs",children:"Why?"})}),(0,n.jsx)(u,{children:(0,n.jsx)("p",{children:e.reason})})]})]})]},s))})]}),R&&R.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-sm mb-2 flex items-center gap-2",children:"Caps Applied"}),(0,n.jsx)("ul",{className:"space-y-2",children:R.map((e,s)=>(0,n.jsxs)("li",{className:"flex justify-between items-center text-sm p-2 bg-red-50/50 dark:bg-red-900/10 rounded",children:[(0,n.jsx)("span",{className:"text-destructive/80",children:e.label}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-mono text-destructive font-bold",children:e.value}),(0,n.jsxs)(m,{children:[(0,n.jsx)(h,{children:(0,n.jsx)("span",{className:"text-muted-foreground cursor-help text-xs",children:"Why?"})}),(0,n.jsx)(u,{children:(0,n.jsx)("p",{children:e.reason})})]})]})]},s))})]}),E&&E.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Guard Checks"}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:E.map((e,s)=>(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded text-sm",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)(m,{children:[(0,n.jsx)(h,{children:(0,n.jsx)(a.C,{variant:"pass"===e.result?"outline":"destructive",className:"pass"===e.result?"border-green-500 text-green-600":"",children:e.result.toUpperCase()})}),(0,n.jsx)(u,{children:(0,n.jsx)("p",{children:e.reason})})]})]},s))})]})]}),y&&(0,n.jsxs)(n.Fragment,{children:[A&&A.length>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Ranking Signals"}),(0,n.jsx)("div",{className:"space-y-3",children:A.map((e,s)=>(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"font-medium",children:e.name}),(0,n.jsxs)("span",{className:"font-mono text-xs text-muted-foreground",children:["W: ",e.weight.toFixed(2)," \xd7 S: ",e.score.toFixed(2)]})]}),(0,n.jsx)("div",{className:"h-2 w-full bg-muted rounded-full overflow-hidden",children:(0,n.jsx)("div",{className:"h-full bg-blue-500 transition-all",style:{width:"".concat(100*e.score,"%"),opacity:e.weight}})}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground text-right",children:e.description})]},s))})]}),F&&F.length>0&&(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("h4",{className:"font-medium text-sm mb-2",children:"Context (Neighbors)"}),(0,n.jsx)("div",{className:"rounded-md border divide-y",children:F.map((e,s)=>(0,n.jsxs)("div",{className:"p-2 flex justify-between text-sm",children:[(0,n.jsx)("span",{children:e.metric}),(0,n.jsxs)("span",{className:"font-mono",children:["Rank #",e.rank," (Val: ",e.value,")"]})]},s))})]})]}),(0,n.jsx)(o,{}),(0,n.jsxs)("div",{className:"text-[10px] text-muted-foreground space-y-1 font-mono",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Source:"}),(0,n.jsx)("span",{children:"Deterministic Replay (Zero-Sim)"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Computed At:"}),(0,n.jsx)("span",{children:g.timestamp||(null===(f=g.metadata)||void 0===f?void 0:f.computed_at)||"Now"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:"Policy Version:"}),(0,n.jsx)("span",{children:g.policy_version||"unknown"})]})]})]})]})})}}}]);